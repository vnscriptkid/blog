{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/things-to-know-about-use-state",
    "result": {"data":{"post":{"slug":"/things-to-know-about-use-state","title":"Things to know about useState","date":"13.02.2021","tags":[{"name":"React","slug":"react"},{"name":"useState pitfalls","slug":"use-state-pitfalls"},{"name":"JavaScript","slug":"java-script"},{"name":"TypeScript","slug":"type-script"}],"description":"5 things everyone needs to know about useState","canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Things to know about useState\",\n  \"description\": \"5 things everyone needs to know about useState\",\n  \"date\": \"2021-02-13T00:00:00.000Z\",\n  \"banner\": \"../dont-over-usestate/use-state-pitfalls.png\",\n  \"tags\": [\"React\", \"useState pitfalls\", \"JavaScript\", \"TypeScript\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"64.58333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACFElEQVQ4y41Ty27TUBD1NyC1oU1tX9txHrWdtE6aOK86bZ4NLwWFRUEtgvCoUAktICEQAiEWSCDEApC6QkhsQAJWfAJrfumgmVsCMkF0MdHN3DPnzjkzVkzTxJ9hGAYHncVCHPr8HAwh5Dkuz79w0VoKZVqSC3QN/uA8ils7MBMJZDunEFwew3ZcGLqOf9VNJRSainShhMLmCOlCgN7rj8gPt5l06eSQOzUta2qXSlQuAbXYLLz1Hmp7j1C8eAPdVx9Q33+M8tV9lC7tQjs+OyGLkkY6tCDUBWTbJ1Dcuo7Oy/doPn2L8s5d1O88Qf/gC8rXbiN/bvtoHRKIhlAbP0RqKX/Y0U0Mv/3gXOPBc5gJW977K2zNfz0kw5NeDsGVPWy8+YTOi3fsZXjvGfoHX5nUWW1C6BorOpKH+lwM6WKZiZzaGgafvyMY3eKh+INNqDPHYFqJvyTT/6lTNoSOZG6Z/fLPXkB19z6TB6Mxst3TvJP0cHQoTEg/5IXQNA6STDk9Po9MqQq30YYWm0Ey58Nr9eXiCyFxQmLlWS68YtlJLFZDuKsteM0NlkUrQz5RbrESwnY8ZIoVZFbKnKf7XO/MBOPU1/lBIlYs24a71oUbtuGGLfYsE9QY7FQbcBsdJFJpeM0+F2ZKFaSWC4wlHE2bHqWtYEKWrKpStqoeytZ+26CqMAzB8iaW6DrfE26SF/Jz/AlJI5cbzynO4QAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"use state pitfalls\",\n    \"title\": \"use state pitfalls\",\n    \"src\": \"/blog/static/3618c6401c627a3352a2218e5567bfab/7d769/use-state-pitfalls.png\",\n    \"srcSet\": [\"/blog/static/3618c6401c627a3352a2218e5567bfab/5243c/use-state-pitfalls.png 240w\", \"/blog/static/3618c6401c627a3352a2218e5567bfab/ab158/use-state-pitfalls.png 480w\", \"/blog/static/3618c6401c627a3352a2218e5567bfab/7d769/use-state-pitfalls.png 960w\", \"/blog/static/3618c6401c627a3352a2218e5567bfab/87339/use-state-pitfalls.png 1440w\", \"/blog/static/3618c6401c627a3352a2218e5567bfab/89fe2/use-state-pitfalls.png 1642w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"dont-over-use-state\"\n  }, \"#1: Don't over useState\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"putting-props-to-use-state\"\n  }, \"#2: Putting props to useState\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"b\", null, \"#3: Things to know about useState\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"use-state-for-one-time-initializations\"\n  }, \"#4: useState for one-time initializations\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"use-state-vs-use-reducer\"\n  }, \"#5: useState vs. useReducer\"))), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://reactjs.org/docs/hooks-reference.html#usestate\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"React.useState\"), \" is pretty straightforward to use. A value, a setter function, an initial state. What hidden gems could possibly be there to know about? Well, here are 5 things you can profit from on a daily basis that you might not have known:\"), mdx(\"h2\", {\n    \"id\": \"1-the-functional-updater\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"1: The functional updater\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#1-the-functional-updater\",\n    \"aria-label\": \"1 the functional updater permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Good old \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"setState\"), \" (in React class components) had it, and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \" has it, too: The functional updater! Instead of passing a new value to the setter that we get from \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \", we can also pass a function to it. React will call that function and gives us the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"previousValue\"), \", so that we can calculate a new result depending on it:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js:title=functional-updater\"\n  }, \"const [count, setCount] = React.useState(0)\\n\\n// \\uD83D\\uDEA8 depends on the current count value to calculate the next value\\n<button onClick={() => setCount(count + 1)}>Increment</button>\\n\\n// \\u2705 uses previousCount to calculate next value\\n<button onClick={() => setCount(previousCount => previousCount + 1)}>Increment</button>\\n\")), mdx(\"p\", null, \"This might be totally irrelevant, but it might also introduce subtle bugs in some situations:\"), mdx(\"h3\", {\n    \"id\": \"calling-the-same-setter-multiple-times\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Calling the same setter multiple times\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#calling-the-same-setter-multiple-times\",\n    \"aria-label\": \"calling the same setter multiple times permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Live example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }, \"function App() {\\n  const [count, setCount] = React.useState(0)\\n\\n  return (\\n    <button\\n      onClick={() => {\\n        setCount(count + 1)\\n        setCount(count + 1)\\n      }}\\n    >\\n      \\uD83D\\uDEA8 This will not work as expected, count is: {count}\\n    </button>\\n  )\\n}\\n\\nrender(<App />)\\n\")), mdx(\"p\", null, \"Each click will only increment the count once, because both calls to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"setCount\"), \" closure over the same value (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"count\"), \"). It's important to know that \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"setCount\"), \" will \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" immediately set the count. The useState updater only schedules an update. It basically tells React:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Please set this value to the new value, somewhen.\")), mdx(\"p\", null, \"And in our example, we are telling React the same thing twice:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Please set the count to two\", mdx(\"br\", null), \"\\nPlease set the count to two\")), mdx(\"p\", null, \"React does so, but this is probably not what we intended to say. We wanted to express:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Please increment the current value\", mdx(\"br\", null), \"\\nPlease increment the current value (again)\")), mdx(\"p\", null, \"The functional updater form ensures this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }, \"function App() {\\n  const [count, setCount] = React.useState(0)\\n\\n  return (\\n    <button\\n      onClick={() => {\\n        setCount((previousCount) => previousCount + 1)\\n        setCount((previousCount) => previousCount + 1)\\n      }}\\n    >\\n      \\u2705 Increment by 2, count is: {count}\\n    </button>\\n  )\\n}\\n\\nrender(<App />)\\n\")), mdx(\"h3\", {\n    \"id\": \"when-async-actions-are-involved\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"When async actions are involved\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#when-async-actions-are-involved\",\n    \"aria-label\": \"when async actions are involved permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Kent C. Dodds has written a lengthy post about this \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://kentcdodds.com/blog/use-state-lazy-initialization-and-function-updates\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"here\"), \", and the conclusion is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Any time I need to compute new state based on previous state, I use a function update.\")), mdx(\"p\", {\n    style: {\n      \"paddingLeft\": \"3rem\",\n      \"marginTop\": \"-1rem\"\n    }\n  }, \"\\u2014 Kent C. Dodds\"), mdx(\"p\", null, \"I can second that conclusion and encourage you to read that article thoroughly.\"), mdx(\"h3\", {\n    \"id\": \"bonus-avoiding-dependencies\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Bonus: Avoiding dependencies\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#bonus-avoiding-dependencies\",\n    \"aria-label\": \"bonus avoiding dependencies permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The functional updater form can also help you to avoid dependencies for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useMemo\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useCallback\"), \". Suppose you want to pass an increment function to a memoized child component. We can make sure the function doesn't change too often with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useCallback\"), \", but if we closure over \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"count\"), \", we will still create a new reference whenever count changes. The functional updater avoids this problem altogether:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js:title=avoiding-dependencies\"\n  }, \"function Counter({ incrementBy = 1 }) {\\n  const [count, setCount] = React.useState(0)\\n\\n  // \\uD83D\\uDEA8 will create a new function whenever count changes because we closure over it\\n  const increment = React.useCallback(() => setCount(count + incrementBy), [\\n    incrementBy,\\n    count,\\n  ])\\n\\n  // \\u2705 avoids this problem by not using count at all\\n  const increment = React.useCallback(\\n    () => setCount((previousCount) => previousCount + incrementBy),\\n    [incrementBy]\\n  )\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"bonus2-toggling-state-with-usereducer\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Bonus2: Toggling state with useReducer\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#bonus2-toggling-state-with-usereducer\",\n    \"aria-label\": \"bonus2 toggling state with usereducer permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Toggling a Boolean state value is likely something that you've done once or twice before. Judging by the above rule, it becomes a bit boilerplate-y:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js:title=🚨-toggle-with-use-state\"\n  }, \"const [value, setValue] = React.useState(true)\\n\\n<button onClick={() => setValue(previousValue => !previousValue)}>Toggle</button>\\n\")), mdx(\"p\", null, \"If the only thing you want to do is toggle the state value, maybe even multiple times in one component, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" might be the better choice, as it:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"shifts the toggling logic from the setter invocation to the hook call\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"allows you to name your toggle function, as it's not just a setter\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"reduces repetitive boilerplate if you use the toggle function more than once\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js:title=✅-toggle-with-use-reducer\"\n  }, \"const [value, toggleValue] = React.useReducer(previous => !previous, true)\\n\\n<button onClick={toggleValue}>Toggle</button>\\n\")), mdx(\"p\", null, \"I think this shows quite well that reducers are not only good for handling \\\"complex\\\" state, and you don't need to dispatch events with it at all costs.\"), mdx(\"h2\", {\n    \"id\": \"2-the-lazy-initializer\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"2: The lazy initializer\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#2-the-lazy-initializer\",\n    \"aria-label\": \"2 the lazy initializer permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"When we pass an initial value to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \", the initial variable is always created, but React will only use it for the first render. This is totally irrelevant for most use cases, e.g. when you pass a string as initial value. In rare cases, we have to do a complex calculation to initialize our state. For these situations, we can pass a function as initial value to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \". React will only invoke this function when it really needs the result (= when the component mounts):\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js:title=lazy-initializer\"\n  }, \"// \\uD83D\\uDEA8 will unnecessarily be computed on every render\\nconst [value, setValue] = React.useState(\\n  calculateExpensiveInitialValue(props)\\n)\\n\\n// \\u2705 looks like a small difference, but the function is only called once\\nconst [value, setValue] = React.useState(() =>\\n  calculateExpensiveInitialValue(props)\\n)\\n\")), mdx(\"h2\", {\n    \"id\": \"3-the-update-bailout\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"3: The update bailout\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#3-the-update-bailout\",\n    \"aria-label\": \"3 the update bailout permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"When you call the updater function, React will not always re-render your component. It will bail out of rendering if you try to update to the same value that your state is currently holding. React uses \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#description\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"Object.is\"), \" to determine if the values are different. See for yourself in this live example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }, \"function App() {\\n  const [name, setName] = React.useState('Elias')\\n\\n  // \\uD83E\\uDD2F clicking this button will not re-render the component\\n  return (\\n    <button onClick={() => setName('Elias')}>\\n      Name is: {name}, Date is: {new Date().getTime()}\\n    </button>\\n  )\\n}\\n\\nrender(<App />)\\n\")), mdx(\"h2\", {\n    \"id\": \"4-the-convenience-overload\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"4: The convenience overload\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#4-the-convenience-overload\",\n    \"aria-label\": \"4 the convenience overload permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"This one is for all TypeScript users out there. Type inference for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \" usually works great, but if you want to initialize your value with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"undefined\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"null\"), \", you need to explicitly specify the generic parameter, because otherwise, TypeScript will not have enough information:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts:title=use-state-type-inferrence\"\n  }, \"// \\uD83D\\uDEA8 age will be inferred to `undefined` which is kinda useless\\nconst [age, setAge] = React.useState(undefined)\\n\\n// \\uD83C\\uDD97 but a bit lengthy\\nconst [age, setAge] = React.useState<number | null>(null)\\n\")), mdx(\"p\", null, \"Luckily, there is a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/7a0d9c019f2b48b36b88691247870e6885b97a02/types/react/v16/index.d.ts#L921-L928\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"convenience overload\"), \" of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \" that will add \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"undefined\"), \" to our passed type if we completely omit the initial value. It will also be \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"undefined\"), \" at runtime, because not passing a parameter at all is equivalent to passing \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"undefined\"), \" explicitly:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts:title=use-state-convenience-overload\"\n  }, \"// \\u2705 age will be `number | undefined`\\nconst [age, setAge] = React.useState<number>()\\n\")), mdx(\"p\", null, \"Of course, if you absolutely have to initialize with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"null\"), \", you need the lengthy version.\"), mdx(\"h2\", {\n    \"id\": \"5-the-implementation-detail\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"5: The implementation detail\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#5-the-implementation-detail\",\n    \"aria-label\": \"5 the implementation detail permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useState\"), \" is (kinda) implemented with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" under the hood. You can see this in \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/facebook/react/blob/1a7472624661270008011fd77f097d71e6249de9/packages/react-reconciler/src/ReactFiberHooks.new.js#L1242-L1246\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"the source code here\"), \". There is also a great article by Kent C. Dodds on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://kentcdodds.com/blog/how-to-implement-usestate-with-usereducer\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"how to implement useState with useReducer\"), \".\"), mdx(\"h2\", {\n    \"id\": \"conclusion\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Conclusion\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#conclusion\",\n    \"aria-label\": \"conclusion permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The first 3 of those 5 things are actually mentioned directly in the Hooks API Reference of the official React docs I linked to at the very beginning \\uD83D\\uDE09. If you didn't know about these things before - now you do!\"), mdx(Comments, {\n    mdxType: \"Comments\"\n  }, \"How many of these points did you know? Leave a comment below \\u2B07\\uFE0F\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"#1: Don't over useState #2: Putting props to useState #4: useState for one-time initializations #5: useState vs. useReducer React.useState…","timeToRead":3,"banner":{"childImageSharp":{"resize":{"src":"/static/3618c6401c627a3352a2218e5567bfab/73f08/use-state-pitfalls.png"}}}}},"pageContext":{"slug":"/things-to-know-about-use-state","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}