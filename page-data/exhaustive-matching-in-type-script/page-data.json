{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/exhaustive-matching-in-type-script",
    "result": {"data":{"post":{"slug":"/exhaustive-matching-in-type-script","title":"Exhaustive matching in TypeScript","date":"09.08.2020","tags":[{"name":"Scala","slug":"scala"},{"name":"TypeScript","slug":"type-script"},{"name":"React","slug":"react"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Exhaustive matching in TypeScript\",\n  \"date\": \"2020-08-09T00:00:00.000Z\",\n  \"banner\": \"./exhaustive-matching.jpg\",\n  \"tags\": [\"Scala\", \"TypeScript\", \"React\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"640px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUBAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFxSyJior//xAAZEAADAQEBAAAAAAAAAAAAAAAAAQISEwP/2gAIAQEAAQUCvzUKs55GdnCBo//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AYj/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQETEC/9oACAEBAAY/AlfJkK3Gs//EABwQAQACAQUAAAAAAAAAAAAAAAEAEVEhMUGBwf/aAAgBAQABPyFU3NIACmJQUp7jUGQiBzmJfpP/2gAMAwEAAgADAAAAENsP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QBH//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBc/wD/xAAeEAEAAgIBBQAAAAAAAAAAAAABABEhMUFRYYGhsf/aAAgBAQABPxC6lmM9CDhNqkv1EQqHQV+Q3ILDvNZeXJ5YjJ/Of//Z')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"exhaustive matching\",\n    \"title\": \"exhaustive matching\",\n    \"src\": \"/blog/static/9ea491fae20f706a71d53383ac797515/bbe0c/exhaustive-matching.jpg\",\n    \"srcSet\": [\"/blog/static/9ea491fae20f706a71d53383ac797515/46946/exhaustive-matching.jpg 240w\", \"/blog/static/9ea491fae20f706a71d53383ac797515/55489/exhaustive-matching.jpg 480w\", \"/blog/static/9ea491fae20f706a71d53383ac797515/bbe0c/exhaustive-matching.jpg 640w\"],\n    \"sizes\": \"(max-width: 640px) 100vw, 640px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"), mdx(Attribution, {\n    name: \"Sheri Hooley\",\n    url: \"https://unsplash.com/@sherihoo\",\n    mdxType: \"Attribution\"\n  }), mdx(\"p\", null, \"It is already well known in the frontend development community that adopting TypeScript is a good idea for (almost) every project that reaches a certain size.\\nAdvantages cited usually evolve around safety, clearly documented interfaces, finding errors before they go to production and being able to refactor safely.\"), mdx(\"p\", null, \"While I totally agree that these are great points in favor of TypeScript, I think there is one advantage that is criminally underrated:\"), mdx(\"h2\", {\n    \"id\": \"the-ability-to-safely-add-code\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"The ability to safely add code\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#the-ability-to-safely-add-code\",\n    \"aria-label\": \"the ability to safely add code permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Even though I firmly believe that deleting code is much more fun (and productive) than writing code, what we do most of the time, is adding code.\"), mdx(\"p\", null, \"Adding new features. Adding enhancements to existing features. Making a feature a bit more customizable. After all, it is mostly what customers want.\\nSo how come we never talk about how great TypeScript is, if used correctly, for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"adding\"), \" things.\"), mdx(\"p\", null, \"Yes, moving and renaming things and having the compiler tell you where you forgot something is great,\\nbut IDEs are catching up and are pretty good at these things for JavaScript files already.\\nBut no Editor will tell you that you forgot to handle a new branch in your switch statement when you add a new feature.\"), mdx(\"p\", null, \"This is where exhaustive matching comes into play.\"), mdx(\"h2\", {\n    \"id\": \"what-is-exhaustive-matching\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"What is exhaustive matching?\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#what-is-exhaustive-matching\",\n    \"aria-label\": \"what is exhaustive matching permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Some languages, like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OCaml\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"F#\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scala\"), \" support the concept of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pattern matching\"), \".\\nIt's a little bit like javascript's switch statement on steroids, as it allows matching a value not only against other values, but also against patterns.\"), mdx(\"p\", null, \"Exhaustive matching basically means that the compiler, given that he knows all the possible states,\\ncan tell you when you are missing one state in your match.\\nI will use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scala\"), \" code for the examples since it's the language I am most familiar with.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java:title=basic-pattern-matching-in-scala\"\n  }, \"sealed trait Shape\\n\\nfinal case class Circle(radius: Int) extends Shape\\nfinal case class Rectangle(width: Int, height: Int) extends Shape\\n\\ndef renderShape(shape: Shape): String = {\\n  shape match {\\n    case _:Rectangle => \\\"I am a Rectangle!\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://scastie.scala-lang.org/8asQjmtsSTuK2FKgmEX65w\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"Try me in scastie\")), mdx(\"p\", null, \"Here, the compiler would complain with the following message:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"match may not be exhaustive. It would fail on the following input: Circle\")), mdx(\"p\", null, \"Great, so as a JavaScript developer, being aware of the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://eslint.org/docs/rules/default-case\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"default-case\"), \" eslint rule,\\nI'll just add a default case here and call it a day:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java:title=default-case\",\n    \"metastring\": \"{4}\\\"\",\n    \"{4}\\\"\": true\n  }, \"def renderShape(shape: Shape): String = {\\n  shape match {\\n    case _:Rectangle => \\\"I am a Rectangle!\\\"\\n    case _ => \\\"I'm a Circle\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://scastie.scala-lang.org/eBVdb1hIR46nLDqwuzPeeg\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"Try me in scastie\")), mdx(\"p\", null, \"The program works, and all the cases in the match are being taken care of, so no one complains.\\nBut what happens if we add another shape?\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java:title=a-new-shape\",\n    \"metastring\": \"{1}\\\"\",\n    \"{1}\\\"\": true\n  }, \"final case class Square(length: Int) extends Shape\\n\\ndef renderShape(shape: Shape): String = {\\n  shape match {\\n    case _:Rectangle => \\\"I am a Rectangle!\\\"\\n    case _ => \\\"I'm a Circle\\\"\\n  }\\n}\\n\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://scastie.scala-lang.org/gPHbnUrpTgyK0arINPP2cg\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"Try me in scastie\")), mdx(\"p\", null, \"Right. The program will still work, but it will \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" work correctly. If we pass a Square to the renderShape method,\\nit will identify as a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Circle\"), \", which is certainly not what we would expect.\"), mdx(\"p\", null, \"Sure, as long as the code is \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://kentcdodds.com/blog/colocation\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"co-located\"), \", this might be a non-issue.\\nYou will see that you have to adapt the code right below.\"), mdx(\"p\", null, \"But obviously, in a fairly large code base, you will have go to through all the usages, and it's easy to forget one.\\nBeing able to utilize \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"compiler driven development\"), \" (think: Fix everything that's red and then it is guaranteed to work) is of great help.\"), mdx(\"p\", null, \"So here is how the fixed scala code would look:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java:title=exhaustive-match\",\n    \"metastring\": \"{4,5}\\\"\",\n    \"{4,5}\\\"\": true\n  }, \"def renderShape(shape: Shape): String = {\\n  shape match {\\n    case _:Rectangle => \\\"I am a Rectangle!\\\"\\n    case _:Circle => \\\"I'm a Circle\\\"\\n    case _:Square => \\\"I'm a Square\\\"\\n  }\\n}\\n\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://scastie.scala-lang.org/KinShmJ1R3GyxyBR5POWSQ\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"Try me in scastie\")), mdx(\"p\", null, \"Notice how we just got rid of the default case completely.\\nIf we add a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Triangle\"), \" now, it will show us an error again.\"), mdx(\"h2\", {\n    \"id\": \"how-can-we-do-this-in-typescript\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"How can we do this in TypeScript?\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#how-can-we-do-this-in-typescript\",\n    \"aria-label\": \"how can we do this in typescript permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"This is great and all, but TypeScript doesn't support pattern matching, so how are we supposed to do this in TS?\"), mdx(\"p\", null, \"It turns out that the TypeScript compiler is actually pretty smart when it comes to matching exhaustively on union types.\\nThis is best done with tagged unions, which just means a union where each member define a discriminator of a literal type:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts:title=tagged-union\"\n  }, \"type Circle = {\\n  kind: 'circle'\\n  radius: number\\n}\\n\\ntype Rectangle = {\\n  kind: 'rectangle'\\n  width: number\\n  height: number\\n}\\n\\ntype Shape = Circle | Rectangle\\n\\nconst renderShape = (shape: Shape): string => {\\n  switch (shape.kind) {\\n    case 'circle':\\n      return 'I am a circle'\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.typescriptlang.org/play?#code/C4TwDgpgBAwglgJwMYBtoF4oG8BQV9QDWcAdgCYBcUA5EoqhNXgQgIZlwCuAzlSZwFsARhAQ4AvjlCQoAJQhJgrEgHM0UTLgJFSlGggVLVaJtoDucMsAAWfQSLHbrEOCuvA7w0RKnhoAZWtWGUx4ZHUAHzlDZTUIHBwkAHsSbmAoA3JRQOCMKAAKbiDIKhzIAEoqNIRSFQ0APmxmfG4LYCRrAqLcgDpicnKm7W0kVm5oWnoTCmbh7QNgTgQSGgBJKFYBDag6cMZZyXEgA\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"TypeScript playground\")), mdx(\"p\", null, \"In this example, the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"kind\"), \" field serves as the discriminator: Every shape is uniquely identified by it.\"), mdx(\"p\", null, \"With the above code, you should now see the following error:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Function lacks ending return statement and return type does not include 'undefined'.(2366)\")), mdx(\"p\", null, \"Note that even if you remove the explicit return type,\\nand if you have \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.typescriptlang.org/tsconfig#noImplicitReturns\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"noImplicitReturns\"), \" turned on in your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tsconfig.json\"), \",\\nyou will \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"still\"), \" get the error:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Not all code paths return a value.(7030)\")), mdx(\"p\", null, \"So the compiler \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"really\"), \" wants to tell us that we forgot something here, which is great.\"), mdx(\"p\", null, \"Again, we should \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" fall into the trap of adding a default case here.\\nI would even disable the aforementioned eslint rule for TypeScript files, because I don't think it adds a lot that the compiler won't catch for us anyways.\"), mdx(\"p\", null, \"The compiler will also narrow the type for us in the case block, so we \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"will\"), \" have access to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"shape.radius\"), \" inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"case 'circle'\"), \", but not outside of it.\"), mdx(\"p\", null, \"A small caveat seems to be that you cannot use object destructuring on the shape param.\\nEven though all members of the union type contain a shape, TypeScript won't accept this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts:title=❌-no-destructuring-😢\",\n    \"metastring\": \"{1, 4}\",\n    \"{1,\": true,\n    \"4}\": true\n  }, \"const renderShape = ({ kind, ...shape }: Shape): string => {\\n  switch (kind) {\\n    case 'circle':\\n      return `I am a circle with ${shape.radius}`\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.typescriptlang.org/play?#code/C4TwDgpgBAwglgJwMYBtoF4oG8BQV9QDWcAdgCYBcUA5EoqhNXgQgIZlwCuAzlSZwFsARhAQ4AvjlCQoAJQhJgrEgHM0UTLgJFSlGggVLVaJtoDucMsAAWfQSLHbrEOCuvA7w0RKnhoAZWtWGUx4ZHUAHzlDZTUIHBwkAHsSbmAoA3JRQOCMKAAKLB1yABooADpK7iCZcSocyABKKjSEUhUNAD5sZnxuC2AkawLickae7W0kVm5oWnoTCl7J7QNgTgQSKAADAEkoVgEDqDpw6AHhgBIsatzytg4ecW3lyXEgA\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"TypeScript playground\")), mdx(\"p\", null, \"It is especially important to keep this in mind when working with React components, as their props tend to be destructured a lot.\"), mdx(\"p\", null, \"So with all this in mind, our code would look like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts:title=exhaustive-matching-in-ts\"\n  }, \"const renderShape = (shape: Shape): string => {\\n  switch (shape.kind) {\\n    case 'circle':\\n      return 'I am a circle'\\n    case 'rectangle':\\n      return 'I am a rectangle'\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.typescriptlang.org/play?#code/C4TwDgpgBAwglgJwMYBtoF4oG8BQV9QDWcAdgCYBcUA5EoqhNXgQgIZlwCuAzlSZwFsARhAQ4AvjlCQoAJQhJgrEgHM0UTLgJFSlGggVLVaJtoDucMsAAWfQSLHbrEOCuvA7w0RKnhoAZWtWGUx4ZHUAHzlDZTUIHBwkAHsSbmAoA3JRQOCMKAAKbiDIKhzIAEoqNIRSFQ0APmxmfG4LYCRrAqLcgDpicnKm7W0kVm5oWnoTCmbh7QNgTgQSGgBJKFYBDag6cMZZkbGJg0VY6YO5jIhF5bWNrdYr0+N97UlxIA\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"Typescript playground\")), mdx(\"p\", null, \"Typescript is happy with this, and we will get a compile time error when we add a new Shape \\uD83C\\uDF89\"), mdx(\"h2\", {\n    \"id\": \"runtime-caveats\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Runtime caveats\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#runtime-caveats\",\n    \"aria-label\": \"runtime caveats permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Types don't exist at runtime - all the safety that we have only exists at compile time.\\nThis is no problem as long as we, with our 100% typescript codebase, are the only callers of that function.\\nIn the real world, this is sometimes not the case. We might have some untyped JavaScript code that calls our function,\\nor we are not in control at all where our input comes from.\"), mdx(\"p\", null, \"Let's assume for example that we call a rest service that delivers a couple of Shapes that we want to render,\\nand we have established with the backend team that we will focus on Circle and Rectangle first and will add Square later.\\nWe will use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"React\"), \" to render our little app:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx:title=react-shapes\"\n  }, \"export const App = () => {\\n  const [shapes, setShapes] = React.useState()\\n\\n  React.useEffect(() => {\\n    getShapes().then(setShapes)\\n  }, [])\\n\\n  if (!shapes) {\\n    return <Loading />\\n  }\\n\\n  return (\\n    <Grid>\\n      {shapes.map((shape) => (\\n        <Shape {...shape} />\\n      ))}\\n    </Grid>\\n  )\\n}\\n\\nconst Shape = (props: Shape): JSX.Element => {\\n  switch (props.kind) {\\n    case 'circle':\\n      return <Circle radius={props.radius} />\\n    case 'rectangle':\\n      return <Rectangle width={props.width} height={props.height} />\\n  }\\n}\\n\")), mdx(\"p\", null, \"Great, this is future-proof, typescript will tell us what to do as soon as we add \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"another\"), \" Shape.\"), mdx(\"p\", null, \"Here, you can see the whole App in action:\"), mdx(\"iframe\", {\n    src: \"https://codesandbox.io/embed/nostalgic-diffie-gush0?fontsize=14&hidenavigation=1&theme=dark&view=preview\",\n    style: {\n      \"width\": \"100%\",\n      \"height\": \"500px\",\n      \"border\": \"0\",\n      \"borderRadius\": \"4px\",\n      \"overflow\": \"hidden\"\n    },\n    title: \"nostalgic-diffie-gush0\",\n    allow: \"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\",\n    sandbox: \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n  }), mdx(\"h2\", {\n    \"id\": \"undefined-strikes-back\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Undefined strikes back\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#undefined-strikes-back\",\n    \"aria-label\": \"undefined strikes back permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"But then, something else happens: The backend team is \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"faster\"), \" than expected \\uD83D\\uDE2E.\\nTheir sprint is running great, so they decide to implement the Square right away.\\nIt's a quick win on their part, and they ship a new minor version of the API.\"), mdx(\"p\", null, \"Guess what happens to our little App?\"), mdx(\"p\", null, \"It will die a horrible runtime death.\\nA minor backend release makes our whole App crash because of this fancy typescript pattern \\uD83D\\uDE22.\\nThis happens because now, we fall through our switch statement, and because we have no default branch, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"undefined\"), \" is returned.\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Undefined\"), \" is one of the few things that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"React\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"cannot\"), \" render, so we die with the famous error:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.\")), mdx(\"p\", null, \"See it live:\"), mdx(\"iframe\", {\n    src: \"https://codesandbox.io/embed/sharp-mirzakhani-lenv3?fontsize=14&hidenavigation=1&theme=dark&view=preview\",\n    style: {\n      \"width\": \"100%\",\n      \"height\": \"500px\",\n      \"border\": \"0\",\n      \"borderRadius\": \"4px\",\n      \"overflow\": \"hidden\"\n    },\n    title: \"sharp-mirzakhani-lenv3\",\n    allow: \"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\",\n    sandbox: \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n  }), mdx(\"h2\", {\n    \"id\": \"never-to-the-rescue\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Never to the rescue\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#never-to-the-rescue\",\n    \"aria-label\": \"never to the rescue permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"In TypeScripts type system, never is it's \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Bottom_type\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"bottom type\"), \".\\nIt denotes something that can never happen, for example, a function that always throws an Exception or has an infinite loop will return never.\"), mdx(\"p\", null, \"How is this helpful?\"), mdx(\"p\", null, \"If typescript narrows the type with each case in the switch statement, if all cases are covered, what remains must be of type \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"never\"), \".\\nWe can assert that with a little helper:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx:title=never\",\n    \"metastring\": \"{1,9,10}\",\n    \"{1,9,10}\": true\n  }, \"const UnknownShape = ({ shape }: { shape: never }) => (\\n  <div>Unknown Shape</div>\\n)\\n\\nconst Shape = (props: Shape): JSX.Element => {\\n  switch (props.kind) {\\n    case 'circle':\\n      return <Circle radius={props.radius} />\\n    case 'rectangle':\\n      return <Rectangle width={props.width} height={props.height} />\\n    default:\\n      return <UnknownShape shape={props} />\\n  }\\n}\\n\")), mdx(\"p\", null, \"This approach has two advantages:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It will \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"not\"), \" fail at runtime - it will still display all other shapes and display a little not-found helper for the newly added shape\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If we add Square to our Shape type, because we finally catch-up with the backend team and want to implement it as well, we will \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"still\"), \" get a compile error from TypeScript. You can see that \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.typescriptlang.org/play?#code/JYWwDg9gTgLgBAKjgQwM5wEoFNkGN4BmUEIcA5FDvmQFA0wCeYWcAQmlgMoAWyzcAXjgBvGnDjAAJgC44AOwCuIAEZYoAbhoBfTY34BhYFFwAbFkPaouvfgDIRYuAGtgcmXABEuI6awfN4lDIksAKqLKKKmqaOvRMLNj4yHIA5maCbBw8fCz2ouIubrIelEmpZv6OAO5SMNwRSqoajtxYwCncMA1RzbF6LJwAjgrIlBmW1jlweY4Fru4eqMOjfgA0s3BmqXWyAOzacfzZ-EKGxukAPphYZWksV0MjlJo0uBByqPBnvhkAFMJwIIhMJwLSyADyIGAMAAPN8zKtPIVJB44FcPFIPAA+ACUgixcF+jhhIQAbliAJJkUjIODec4sGp1QHBULoYRAtlaGEAejJWJoOJebw+8ESMGSdz+AJqkjqiNa7U6oIhUNh4slCKR81R6MxuPxhOJ-I2VJpgJuEvKjOh3DgsuZwgd3C0KDccEVHXgwk9nS0xL5wHJguF70+cAAqnInHIIFU5MdzISAagbCwwSI4KmchEsKS1KC8QICSSg1iozG43I4IneSbXmH4Im-mBiGBwjW0zjZAApTgADQAdABRMwgLByeDFhzicSoJm4O2-VsQduD5F4-Kz7e4Djkem+MjSDbb7eUGAKKDVuE+dKcsICYQrtf31CunkC0+z3dWcilK13EeJ5fhaF5XnAMIata9q1Nwj7Pqgg7Oq6vowPBbaIah76fiBkhYAQyAKCYXTAV+56XteFaxvGzbZsw6Grm+cAfhs-paEAA\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer noopener\"\n  }, \"here\"), \".\\nThis is because now, the type is not narrowed to never (since Square is still left), so the type of props for UnknownShape does not match.\")), mdx(\"h2\", {\n    \"id\": \"conclusion\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Conclusion\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#conclusion\",\n    \"aria-label\": \"conclusion permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fill\": \"currentcolor\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Exhaustive matches are a great tool in any language to make your code safer for additions.\\nWhen you have full control over the input, omitting the default branch seems like a good choice.\\nIf that is not the case, and because TypeScript is in the end just JavaScript, protection at runtime with a never guard is a good alternative.\"), mdx(Comments, {\n    mdxType: \"Comments\"\n  }));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"It is already well known in the frontend development community that adopting TypeScript is a good idea for (almost) every project that…","timeToRead":5,"banner":{"childImageSharp":{"resize":{"src":"/static/9ea491fae20f706a71d53383ac797515/a6c62/exhaustive-matching.jpg"}}}}},"pageContext":{"slug":"/exhaustive-matching-in-type-script","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}